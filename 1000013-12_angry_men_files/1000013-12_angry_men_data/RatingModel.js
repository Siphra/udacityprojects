define(["jquery","underscore","backbone","globals","js-cookie"],function(e,t,i,n){var a={};return a.Media=i.Model.extend({sync:function(e,n,a){if("patch"==e||"update"==e||"create"==e){var r=a.xhr=i.ajax({type:"POST",url:t.result(n,"url"),data:{review:n.get("review"),score:n.get("score"),source:n.get("source")}});return n.trigger("request",n,r,a),r}return a.xhrFields={withCredentials:!0},i.sync.call(this,e,n,a)}}),a.Movie=a.Media.extend({initialize:function(){this.mediaType="movie"},parse:function(e,t){return e.id=e.media.id,e},loginAndSave:function(e,t,i,n){n?this.save(this.toJSON(),{success:n}):this.save(),""!==e&&dataLayer.push({event:"RatingWidget",mediaType:"Movie",target:i,action:e}),""!==t&&dataLayer.push({event:"RatingWidget",mediaType:"Movie",target:i,action:"Review"})}}),a.TvSeason=a.Media.extend({initialize:function(){this.mediaType="tv_show"},parse:function(e,t){return e.id=e.media.id,e},loginAndSave:function(e,t,i,n){n?this.save(this.toJSON(),{success:n}):this.save(),""!==e&&dataLayer.push({event:"RatingWidget",mediaType:"TV",target:i,action:e}),""!==t&&dataLayer.push({event:"RatingWidget",mediaType:"TV",target:i,action:"Review"})}}),a.MovieCollection=i.Collection.extend({model:a.Movie,url:n.PrivateApiFrontendHost+"/api/private/v1.0/users/current/ratings/",getCurrentUserRating:function(e){var t;return null==this.get(e)?(t=new a.Movie({id:e},{collection:this}),t.deferred=t.fetch(),this.add(t)):t=this.get(e),t}}),a.TvSeasonCollection=i.Collection.extend({model:a.TvSeason,url:"/api/private/v1.0/users/current/tvratings/",getCurrentUserRating:function(e){var t;return null==this.get(e)?(t=new a.TvSeason({id:e},{collection:this}),t.deferred=t.fetch(),this.add(t)):t=this.get(e),t}}),n.ord={movies:new a.MovieCollection,tvSeasons:new a.TvSeasonCollection},a});
//# sourceMappingURL=RatingModel.min.js.map