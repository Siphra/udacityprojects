define(["jquery","globals","underscore","backbone","marionette","bootstrap"],function(e,a,t,l,i){var r=l.View.extend({events:{"click .closebutton":"closeTrailerIframeModal"},initialize:function(a){this.$el=a.el,this.metaViewport=e("meta[name='viewport']"),this.currentViewportValue=this.metaViewport.attr("content"),this.$el.on("hidden.bs.modal",this.onClose.bind(this))},openIframeModal:function(e,a,t){this.$el.modal(),this.$("#iframeVideoPlayer").attr("src",e),this.metaViewport.attr("content",this.currentViewportValue+",minimum-scale=1,maximum-scale=1,user-scalable=no"),this.$(".modal-dialog").append("<div class='modal-link-text'><a target='_blank' class='modal-link-url' style='color:#FFFFFF' href="+t+"></a></div>"),this.$(".modal-link-url").text(a)},closeTrailerIframeModal:function(){e("#newIframeTrailerModal").modal("hide")},onClose:function(){console.log("Destroying video iframe"),this.$("#iframeVideoPlayer").attr("src","about:blank"),this.metaViewport.attr("content",this.currentViewportValue)}}),o=l.View.extend({events:{"click .closebutton":"closeTrailerModal","click .closeBtn":"closeTrailerModal"},initialize:function(e){this.$el=e.el},closeTrailerModal:function(){this.$el.modal("hide"),$pdk.controller.resetPlayer(),this.$("#videoPlayer").html("")},openNewModal:function(e,a,t,l,i,r,o,n){this.$("#videoPlayer").html('<iframe class="player" src="//player.theplatform.com/p/'+r+"/"+o+"/select/media/guid/"+n+"/"+t+"?autoPlay=true"+i+"&params=manifest%3Dm3u%26sst%3Dtrue%26debug%3Dtrue%26policy%3D9369485"+l+' " onload="$pdk.bind(this, true); $pdk.controller.setIFrame(this, true);"allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" oallowfullscreen="" msallowfullscreen=""frameborder="0"></iframe>'),this.$el.modal(),this.$el.on("hidden.bs.modal",this.closeTrailerModal.bind(this)),dataLayer.push({event:"ModalTrailer",title:a})}});return i.ItemView.extend({events:{"click .trailer_play_action_button":"openModal","click .featured_video_play_action_button":"openIFrameModal"},initialize:function(t){this.$el=t.el,this.modalInit=!1,this.modalCallback=null,require(["text!"+a.StaticHost+"/static/templates/modalTrailer.html"],function(a){e("body").append(a),this.trailerModal=new o({el:e("#newTrailerModal")}),this.modalInit=!0,this.modalCallback&&(this.modalCallback(),this.modalCallback=null)}.bind(this)),this.iframeInit=!1,this.iframeCallback=null,require(["text!"+a.StaticHost+"/static/templates/modalTrailer.iframe.html"],function(a){e("body").append(a),this.iFrameTrailerModal=new r({el:e("#newIframeTrailerModal")}),this.iFrameTrailerModal.render(),this.iframeInit=!0,this.iframeCallback&&(this.iframeCallback(),this.iframeCallback=null)}.bind(this))},changeVideo:function(e){this.trailerModal.currentTrailer.changeVideo(e)},openIFrameModal:function(a){a.preventDefault();var t=e(a.currentTarget);this.iframeInit?this.iFrameTrailerModal.openIframeModal(t.attr("data-trailer-url"),t.data("sponsoredText"),t.data("sponsoredUrl")):this.iframeCallback=function(){this.iFrameTrailerModal.openIframeModal(t.attr("data-trailer-url"),t.data("sponsoredText"),t.data("sponsoredUrl"))}.bind(this)},openModal:function(a){a.preventDefault();var t=e(a.currentTarget),l=t.data("mpx-params"),i=t.data("mpx-fwsite")||"",r=t.data("mpx-accountpid"),o=t.data("mpx-playerpid"),n=t.data("mpx-accountid");void 0===l&&(l=""),this.modalInit?this.trailerModal.openNewModal(t.data("thumbnail"),t.data("title"),t.data("guid"),l,i,r,o,n):this.modalCallback=function(){this.trailerModal.openNewModal(t.data("thumbnail"),t.data("title"),l,i,r,o,n)}.bind(this)}})});
//# sourceMappingURL=modalTrailer.jsp.min.js.map